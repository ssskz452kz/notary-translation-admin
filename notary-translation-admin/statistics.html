<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据统计 - 公证翻译管理后台</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="navbar">
        <div class="navbar-brand">
            <h2>公证翻译管理后台</h2>
        </div>
        <div class="navbar-menu">
            <a href="dashboard.html" class="nav-link">订单管理</a>
            <a href="services.html" class="nav-link">服务类型</a>
            <a href="statistics.html" class="nav-link active">数据统计</a>
            <a href="settings.html" class="nav-link">系统设置</a>
            <button class="btn btn-outline" onclick="logout()">退出登录</button>
        </div>
    </nav>

    <div class="container">
        <div class="stats-header">
            <h1>数据统计</h1>
            <div class="stats-toolbar">
                <div class="filter-group">
                    <label>日期范围：</label>
                    <input type="date" id="dateFrom" class="filter-input">
                    <span>至</span>
                    <input type="date" id="dateTo" class="filter-input">
                </div>
                <button class="btn btn-primary" onclick="loadStatistics()">刷新</button>
            </div>
        </div>

        <!-- 概览统计 -->
        <section class="stats-section">
            <h3 class="section-title">📊 概览</h3>
            <div class="stats-grid stats-grid-4">
                <div class="stat-card">
                    <div class="stat-icon total">📦</div>
                    <div class="stat-info">
                        <h3 id="totalOrders">-</h3>
                        <p>总订单数</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon pending">📋</div>
                    <div class="stat-info">
                        <h3 id="pendingCount">-</h3>
                        <p>待处理</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon processing">⚙️</div>
                    <div class="stat-info">
                        <h3 id="processingCount">-</h3>
                        <p>处理中</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon completed">✅</div>
                    <div class="stat-info">
                        <h3 id="completedCount">-</h3>
                        <p>已完成</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon cancelled">❌</div>
                    <div class="stat-info">
                        <h3 id="cancelledCount">-</h3>
                        <p>已取消</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 收入统计 -->
        <section class="stats-section">
            <h3 class="section-title">💰 收入统计</h3>
            <div class="stats-grid stats-grid-4">
                <div class="stat-card">
                    <div class="stat-icon revenue">📅</div>
                    <div class="stat-info">
                        <h3 id="todayRevenue">-</h3>
                        <p>今日收入</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon revenue">📆</div>
                    <div class="stat-info">
                        <h3 id="weekRevenue">-</h3>
                        <p>本周收入</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon revenue">🗓️</div>
                    <div class="stat-info">
                        <h3 id="monthRevenue">-</h3>
                        <p>本月收入</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon revenue">💰</div>
                    <div class="stat-info">
                        <h3 id="totalRevenue">-</h3>
                        <p>总收入</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 按服务类型 -->
        <section class="stats-section">
            <h3 class="section-title">📑 按服务类型</h3>
            <div class="stats-table-container">
                <table class="stats-table">
                    <thead>
                        <tr>
                            <th>服务类型</th>
                            <th>订单数</th>
                            <th>收入</th>
                        </tr>
                    </thead>
                    <tbody id="serviceTypeBody">
                        <tr><td colspan="3" class="text-center">加载中...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 按订单状态 -->
        <section class="stats-section">
            <h3 class="section-title">📌 按订单状态</h3>
            <div class="stats-table-container">
                <table class="stats-table">
                    <thead>
                        <tr>
                            <th>状态</th>
                            <th>订单数</th>
                        </tr>
                    </thead>
                    <tbody id="statusBody">
                        <tr><td colspan="2" class="text-center">加载中...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 每日趋势（最近7天） -->
        <section class="stats-section">
            <h3 class="section-title">📈 近7日趋势</h3>
            <div class="stats-table-container">
                <table class="stats-table">
                    <thead>
                        <tr>
                            <th>日期</th>
                            <th>订单数</th>
                            <th>收入</th>
                        </tr>
                    </thead>
                    <tbody id="dailyTrendBody">
                        <tr><td colspan="3" class="text-center">加载中...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="app.js"></script>
    <script src="statistics.js"></script>
</body>
</html>
