# 公证翻译管理后台 - 部署说明

## ⚠️ 重要安全提示

**`config.js` 中的 `serviceRoleKey` 是敏感信息**，具有完全访问数据库的权限。如果部署到公开网站，这个 key 会暴露在前端代码中，任何人都能看到并使用。

## 部署方案对比

### 方案一：本地/内网使用（推荐，最安全）

**适用场景**：只有公证处内部几个人使用，不需要远程访问

**步骤**：
1. 把整个 `notary-translation-admin` 文件夹打包发给公证处
2. 他们解压后，双击 `index.html` 即可使用
3. 或者在内网服务器上部署，通过内网 IP 访问（如 `http://192.168.1.100/index.html`）

**优点**：
- ✅ 最简单，无需配置
- ✅ `serviceRoleKey` 不会暴露到公网
- ✅ 无需域名和服务器

**缺点**：
- ❌ 只能在同一台电脑或内网使用
- ❌ 无法远程访问

---

### 方案二：静态网站托管（免费，但需注意安全）

**适用场景**：需要远程访问，多人使用

**免费托管平台**：
- **Vercel**（推荐）：https://vercel.com
- **Netlify**：https://netlify.com  
- **GitHub Pages**：https://pages.github.com

**部署步骤（以 Vercel 为例）**：

1. **注册账号**：访问 https://vercel.com 注册（可用 GitHub 账号）

2. **上传代码**：
   - 方式 A：GitHub 仓库
     - 在 GitHub 创建仓库，上传 `notary-translation-admin` 文件夹
     - 在 Vercel 导入该仓库，自动部署
   - 方式 B：直接拖拽
     - 在 Vercel Dashboard 点击 "Add New Project"
     - 选择 "Upload" 或拖拽整个文件夹

3. **配置域名**（可选）：
   - Vercel 会自动分配一个免费域名：`your-project.vercel.app`
   - 如需自定义域名：在项目设置 → Domains 添加你的域名（需要先购买域名）

4. **访问**：部署完成后会得到一个 URL，分享给公证处即可

**优点**：
- ✅ 免费
- ✅ 自动 HTTPS
- ✅ 可远程访问
- ✅ 无需服务器

**缺点**：
- ⚠️ `serviceRoleKey` 会暴露在前端代码中（但只有知道 URL 的人才能访问）
- ⚠️ 建议设置密码保护或 IP 白名单（Vercel Pro 功能）

---

### 方案三：购买域名 + 静态托管（专业，但需成本）

**适用场景**：需要专业域名，如 `admin.notary-translation.com`

**步骤**：
1. **购买域名**：
   - 国内：阿里云、腾讯云（约 50-100 元/年）
   - 国外：Namecheap, GoDaddy（约 $10-15/年）

2. **部署到静态托管**：
   - 使用方案二的 Vercel/Netlify
   - 在项目设置中添加你的域名
   - 配置 DNS（托管平台会提供说明）

**优点**：
- ✅ 专业域名，好记
- ✅ 其他同方案二

**缺点**：
- ❌ 需要购买域名（每年费用）
- ⚠️ 同样有 `serviceRoleKey` 暴露问题

---

## 🔒 安全建议

### 如果必须部署到公网：

1. **限制访问**：
   - 使用 Vercel Pro 的密码保护功能
   - 或使用 Cloudflare Access（免费版支持 50 用户）
   - 或设置 IP 白名单

2. **定期更换 serviceRoleKey**：
   - 在 Supabase Dashboard → Settings → API 生成新的 key
   - 更新 `config.js` 并重新部署

3. **监控异常访问**：
   - 在 Supabase Dashboard → Logs 查看 API 调用记录
   - 发现异常及时更换 key

---

## 📦 推荐方案

**如果公证处只有几个人用，且都在同一地点**：
→ **方案一（本地/内网）**：最简单、最安全

**如果需要远程访问，但预算有限**：
→ **方案二（Vercel 免费托管）**：免费、快速、可远程访问

**如果需要专业域名**：
→ **方案三（域名 + Vercel）**：专业但需域名费用

---

## 🚀 快速部署到 Vercel（5 分钟）

1. 访问 https://vercel.com，用 GitHub 账号登录
2. 点击 "Add New Project" → "Import Git Repository"
3. 如果没有 GitHub 仓库：
   - 在 GitHub 创建新仓库（如 `notary-admin`）
   - 上传 `notary-translation-admin` 文件夹
   - 回到 Vercel 导入该仓库
4. Vercel 会自动检测并部署
5. 部署完成后，你会得到一个 URL（如 `notary-admin.vercel.app`）
6. 分享这个 URL 给公证处即可

**注意**：部署后，`config.js` 中的 `serviceRoleKey` 会暴露，但只有知道 URL 的人才能访问后台（还有登录密码保护）。

---

## 📝 给公证处的使用说明

可以创建一个简单的使用文档，告诉他们：
1. 访问地址（本地文件路径或部署后的 URL）
2. 登录密码：`20040404` 或 `2026`（可在系统设置中修改）
3. 基本操作流程（查看订单、更新状态、设置价格等）
